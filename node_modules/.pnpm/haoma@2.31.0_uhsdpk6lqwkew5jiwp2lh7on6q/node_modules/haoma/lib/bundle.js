"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.bundle = void 0;
const tslib_1 = require("tslib");
const esbuild = tslib_1.__importStar(require("esbuild"));
async function bundle(payload) {
    await esbuild.build({
        entryPoints: [payload.input],
        bundle: true,
        outfile: payload.output,
        platform: 'node',
        target: 'node10.4',
        external: payload.externals,
        minify: payload.minify,
        format: payload.format,
        define: {
            ...(payload.nodeEnv != null
                ? {
                    'process.env.NODE_ENV': JSON.stringify(payload.nodeEnv),
                }
                : {}),
        },
    });
}
exports.bundle = bundle;
